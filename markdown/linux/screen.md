# Screen

**描述**

Screen是一个全屏窗口管理器，它在多个进程（通常是交互式外壳程序）之间多路复用物理终端。 每个虚拟终端都提供DEC VT100终端的功能，此外，还提供ISO 6429（ECMA 48，ANSI X3.64）和ISO 2022标准的几种控制功能（例如，插入/删除行以及对多个字符集的支持）。 每个虚拟终端都有一个回滚历史记录缓冲区，以及一个允许在窗口之间移动文本区域的复制和粘贴机制。 

调用screen时，它将创建一个带有外壳（或指定的命令）的单个窗口，然后将其移开，以便您可以正常使用该程序。然后，您可以随时创建包含其他程序的新（全屏）窗口（包括更多的shell），杀死现有窗口，查看窗口列表，打开和关闭输出日志记录，复制和粘贴文本在窗口之间切换，查看滚动历史记录，以任何希望的方式在窗口之间切换，等等。所有窗口都完全独立于彼此运行它们的程序。当程序的窗口当前不可见时，甚至整个屏幕会话都与用户终端分离时，程序仍继续运行。程序终止时，屏幕（默认情况下）会杀死包含该程序的窗口。如果此窗口在前景中，则显示切换到上一个窗口；否则，显示将切换到上一个窗口。如果没有，屏幕将退出。外壳程序通常区分以登录外壳程序或子外壳程序运行。 Screen除非另有说明，否则将它们作为子shell运行（请参阅“ shell” .screenrc命令）。 

您键入的所有内容都会发送到在当前窗口中运行的程序。 唯一的例外是用于向窗口管理器启动命令的一个按键。 默认情况下，每个命令都以Ctrl-a（从现在开始缩写为C-a）开头，之后是另一个击键。 尽管命令字符和所有键绑定的长度始终为两个字符，但可以对其进行完全自定义，以随心所欲。 

Screen无法理解前缀“ C-”来表示控制，尽管在本手册中使用此符号是为了提高可读性。 请使用插入标记（“ ^ A”而不是“ C-a”）作为参数，例如 转义命令或-e选项。 屏幕还将以脱字符号打印出控制字符。 

创建新窗口的标准方法是键入“ C-ac”。 这将r创建一个运行shell的新窗口，并立即切换到该窗口，而不管当前窗口中正在运行的进程的状态如何。 同样，您可以在其中创建带有自定义命令的新窗口，方法是先将命令绑定到击键（在您的.screenrc文件中或在“ Ca：”命令行中），然后像“ Ca c”命令一样使用它 。 另外，可以通过运行以下命令来创建新窗口： 

> screen emacs prog.c

从先前创建的窗口中的shell提示中。 这将不会运行屏幕的另一个副本，而是将命令名称及其参数提供给窗口管理器（在$STY环境变量中指定），窗口管理器将使用它来创建新窗口。 上面的示例将启动emacs编辑器（编辑prog.c）并切换到其窗口。 -请注意，您不能将环境变量从调用Shell传输到应用程序（在这种情况下为emacs），因为它是从父屏幕进程而不是从调用Shell派生的。 

如果screen可写“ / run / utmp”，则将为每个窗口将适当的记录写入此文件，并在窗口终止时将其删除。 这对于使用“对话”，“脚本”，“关机”，“发送”，“ sccs”和其他使用utmp文件确定您的身份的类似程序很有用。 只要您的终端上的屏幕处于活动状态，终端自己的记录就会从utmp文件中删除。 另请参阅“ C-a L”。 

**命令行选项**

-A

> 就所有的窗口调整为显示器的大小

-d <会话名>

> 将指定的会话分离到后台运作

-r <会话名>

> 恢复指定的会话

-R

> 恢复会话，如果没有会话就建立新的会话

-s

> 指定新的会话，并选择要执行的shell

-S <会话名>

> 创建新的会话并指定名称

-v

> 显示版本信息

-x

> 恢复之前离线的会话

-ls or --list

> 显示目前所有的会话

-wipe

> 检查目前所有的会话，并删除无法使用的会话

**快捷键**

所有的screen的快捷键都以Ctrl+a(C-a)开始

>C-a ? -> 显示所有键绑定信息
>C-a c -> 创建一个新的运行shell的窗口并切换到该窗口
>C-a n -> Next，切换到下一个 window 
>C-a p -> Previous，切换到前一个 window 
>C-a 0..9 -> 切换到第 0..9 个 window
>Ctrl+a [Space] -> 由视窗0循序切换到视窗9
>C-a C-a -> 在两个最近使用的 window 间切换 
>C-a x -> 锁住当前的 window，需用用户密码解锁
>C-a d -> detach，暂时离开当前session，将目前的 screen session (可能含有多个 windows) 丢到后台执行，并会回到还没进 screen 时的状态，此时在 screen session 里，每个 window 内运行的 process (无论是前台/后台)都在继续执行，即使 logout 也不影响。 
>C-a z -> 把当前session放到后台执行，用 shell 的 fg 命令则可回去。
>C-a w -> 显示所有窗口列表
>C-a t -> Time，显示当前时间，和系统的 load 
>C-a k -> kill window，强行关闭当前的 window
>C-a [ -> 进入 copy mode，在 copy mode 下可以回滚、搜索、复制就像用使用 vi 一样
>C-b Backward，PageUp 
>C-f Forward，PageDown 
>H(大写) High，将光标移至左上角 
>L Low，将光标移至左下角 
>0 移到行首 
>$ 行末 
>w forward one word，以字为单位往前移 
>b backward one word，以字为单位往后移 
>Space 第一次按为标记区起点，第二次按为终点 
>Esc 结束 copy mode 
>C-a ] -> Paste，把刚刚在 copy mode 选定的内容贴上